<div class="mainBlock">
@if (!ShowPreloader)
{
    <div class="filterBlock">
        <span>Категорія:</span>
        @foreach (var category in ProductFilters.Categories)
        {
            <div>
                @if (category.Selected is true){
                    <input type="checkbox" @bind-value="category.Selected" checked />
                    <label>@category.Name</label>
                }
                else{
                    <input type="checkbox" @bind-value="category.Selected" />
                    <label>@category.Name</label>
                }
            </div>
        }

        <div>
            <span>Ціна від:</span>
            <input type="number" @bind-value="ProductFilters.PriceStart"/>
            <span>Ціна до:</span>
            <input type="number" @bind-value="ProductFilters.PriceEnd"/>
        </div>

        <div>
            <span>Стан:</span>
            @foreach(var state in ProductFilters.States)
            {
                <div>
                    @if(state.Selected is true){
                        <input type="checkbox" @bind-value="state.Selected" checked />
                    }
                    else{
                        <input type="checkbox" @bind-value="state.Selected" />
                    }
                    @if(state.Name == "used"){
                        <label>Б/У</label>
                    }
                    @if(state.Name == "new"){
                        <label>Новий</label>
                    }
                    
                </div>
            }
        </div>

        <button class="btn btn-outline-primary centerOnParrentHorizontal" @onclick="SubmitFilters">Підтвердити</button>
    </div>
    <div>
    @if (_products is not null && _products.List is not null)
    {
        <ul class="catalogUl">
        @foreach (var product in _products.List)
        {
            <li>
                <div class="productCard">
                    <a href="/product/@product.Id">
                        <img class="imgCard" src="@(string.IsNullOrEmpty(product.Image) ? "icons/no_photo.png" : $"{ApiConnection}/images/{product.Image}")" alt=""/>
                    </a>
                    <a href="/product/@product.Id">
                        <span> @product.Title</span>
                    </a>
                    <div>
                        <span>@product.Price</span>
                        <span>₴</span>
                    </div>
                    <div>
                        @if (product.PurchaseTypeId == 1)
                        {
	                        <button>Купити</button>
                        }
                        else if(product.PurchaseTypeId == 2){
	                        <button>До Аукціону</button>
                        }
                    </div>
                </div>
            </li>
        }
        </ul>
    }
    <button class="btn btn-outline-primary centerOnParrentHorizontal" @onclick="PrevProductPage">Попередня</button>
    <span>@(ProductPageNumber + 1) з @MaxProductPageNumber</span>
    <button class="btn btn-outline-primary centerOnParrentHorizontal" @onclick="NextProductPage">Наступна</button>
    </div>
}
else
{
    <div class="spinner-border centerOnParrentHorizontal" role="status">
        <span class="sr-only">Завантаження...</span>
    </div>
}
</div>

